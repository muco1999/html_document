<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title data-i18n="doc_title">WireGuard VPN ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (–¢–µ–æ—Ä–∏—è + –ü—Ä–∞–∫—Ç–∏–∫–∞)</title>
<style>
:root {
  --bg: #0f172a;
  --fg: #e2e8f0;
  --muted: #94a3b8;
  --accent: #38bdf8;
  --ok: #22c55e;
  --warn: #f59e0b;
  --code-bg: #111827;
  --panel-bg: #0b1220;
  --border: #334155;
}
body.light {
  --bg: #f8fafc;
  --fg: #0f172a;
  --muted: #475569;
  --accent: #0284c7;
  --ok: #16a34a;
  --warn: #d97706;
  --code-bg: #f1f5f9;
  --panel-bg: #ffffff;
  --border: #cbd5e1;
}
*{box-sizing:border-box}
body {
  background: var(--bg);
  color: var(--fg);
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  line-height: 1.7;
  margin: 0;
  transition: background .3s,color .3s;
}

/* ---------- HERO HEADER ---------- */
.hero {
  text-align: center;
  padding: 70px 10%;
  background: linear-gradient(135deg, #0ea5e9, #1e3a8a);
  color: white;
  position: relative;
  overflow: hidden;
}
.hero::after {
  content: "";
  position: absolute; inset: 0;
  background: radial-gradient(circle at 20% 30%, rgba(255,255,255,0.15), transparent 60%);
}
.hero img {
  width: 96px; height: 96px;
  border-radius: 50%;
  border: 3px solid white;
  margin: 0 8px;
  object-fit: cover;
  position: relative;
}
.hero h1 {font-size: 2.4em; margin: 14px 0 6px; text-shadow: 0 0 10px rgba(255,255,255,.25);}
.hero p {opacity:.95;}

/* ---------- LAYOUT ---------- */
.container {padding: 36px 12%; max-width: 1200px; margin: 0 auto;}
h2 {color: var(--accent); margin-top: 1.6em}
h3 {color: var(--accent); margin-top: 1.2em; font-weight: 600}

/* ---------- INFO BOXES ---------- */
.info, .tip, .warn {
  background: var(--panel-bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px 16px;
  margin: 18px 0;
}
.info .tag, .tip .tag, .warn .tag{
  display:inline-block; font-size:12px; font-weight:700;
  padding:2px 8px; border-radius:999px; margin-bottom:8px;
  letter-spacing:.4px;
}
.info .tag{background: rgba(56,189,248,.15); color:#7dd3fc; border:1px dashed #38bdf8;}
.tip .tag{background: rgba(34,197,94,.15); color:#86efac; border:1px dashed #22c55e;}
.warn .tag{background: rgba(245,158,11,.15); color:#facc15; border:1px dashed #f59e0b;}
.mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}

/* ---------- CODE ---------- */
pre {
  position: relative;
  margin: 14px 0;
  border-left: 4px solid var(--accent);
  border-radius: 12px;
  background: var(--code-bg);
  overflow-x: auto;
}
code {
  display: block;
  padding: 12px 14px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 14px;
  color: var(--fg);
  white-space: pre;
}
button.copy {
  position: absolute; top: 6px; right: 6px;
  background: var(--accent); color: #0b1320;
  border: none; border-radius: 8px;
  padding: 6px 10px; cursor: pointer;
  font-size: 12px; font-weight: 700; opacity: .9;
}
button.copy:hover {opacity: 1;}

/* ---------- TABLE ---------- */
table {
  width: 100%;
  border-collapse: collapse;
  background: var(--panel-bg);
  border-radius: 12px;
  overflow: hidden;
  margin: 14px 0;
}
th,td {border: 1px solid var(--border); padding: 10px 14px; vertical-align: top}
th {background: var(--accent); color: #fff; text-align: left}

/* ---------- FOOTER & TOGGLE ---------- */
.footer {
  text-align: center;
  padding: 40px 0 30px;
  font-size: 14px;
  color: var(--muted);
  border-top: 1px solid var(--border);
}
#themeToggle {
  position: fixed; top: 15px; right: 15px;
  background: var(--accent); color: #06131e;
  border: none; border-radius: 10px;
  padding: 8px 12px; font-size: 14px;
  cursor: pointer; box-shadow: 0 4px 14px rgba(0,0,0,.25);
  z-index: 10;
}
#themeToggle:hover {transform: translateY(-1px)}
kbd{
  padding:2px 6px;border:1px solid var(--border);border-bottom-width:2px;border-radius:6px;
  background:var(--panel-bg);font-size:12px
}

/* ===== Control panel ===== */
#controlPanel {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  background: var(--panel-bg);
  border-bottom: 1px solid var(--border);
  padding: 12px 0;
  font-size: 14px;
}
#controlPanel select {
  background: var(--code-bg);
  color: var(--fg);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 4px 8px;
  font-family: inherit;
  cursor: pointer;
}
#controlPanel select:hover { border-color: var(--accent); }
</style>
</head>
<body>

<button id="themeToggle">üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</button>

<!-- ======= LANGUAGE & FONT PANEL ======= -->
<div id="controlPanel">
  <div class="lang-select">
    üåê <select id="languageSelect" aria-label="Language">
      <option value="ru">–†—É—Å—Å–∫–∏–π üá∑üá∫</option>
      <option value="en">English üá¨üáß</option>
      <option value="tj">–¢–æ“∑–∏–∫”£ üáπüáØ</option>
    </select>
  </div>

  <div class="font-select">
    üî§ <select id="fontSizeSelect" aria-label="Font size">
      <option value="small" data-i18n="font_small">–ú–∞–ª–µ–Ω—å–∫–∏–π</option>
      <option value="normal" selected data-i18n="font_normal">–û–±—ã—á–Ω—ã–π</option>
      <option value="large" data-i18n="font_large">–ö—Ä—É–ø–Ω—ã–π</option>
    </select>
  </div>
</div>

<!-- ======= HEADER SECTION ======= -->
<section class="hero">
  <img src="myphoto.jpg" alt="Mahmadsharif" title="Mahmadsharif">
  <img src="gpt-logo.png" alt="ChatGPT" title="ChatGPT">
  <h1 data-i18n="hero_title">WireGuard VPN ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</h1>
  <p data-i18n="hero_byline">–ê–≤—Ç–æ—Ä: <b>Mahmadsharif</b> üí™ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å <b>ChatGPT-5</b> ‚öôÔ∏è</p>
</section>

<div class="container">

<!-- ===================== 0. –ö–†–ê–¢–ö–û –û WIREGUARD ===================== -->
<h2 data-i18n="intro_title">–ß—Ç–æ —Ç–∞–∫–æ–µ WireGuard ‚Äî –∫–æ—Ä–æ—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É</h2>
<div class="info">
  <span class="tag" data-i18n="tag_theory">üí° –¢–µ–æ—Ä–∏—è</span>
  <p data-i18n="intro_blurb">WireGuard ‚Äî –±—ã—Å—Ç—Ä—ã–π VPN —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º. –°—É—Ç—å: —Å–µ—Ä–≤–µ—Ä ‚Üî –∫–ª–∏–µ–Ω—Ç—ã –ø–æ –∫–ª—é—á–∞–º, —Ç—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å wg0.</p>
  <ul>
    <li><b>WireGuard</b> ‚Äî –±—ã—Å—Ç—Ä—ã–π VPN –Ω–∞ –±–∞–∑–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–±–æ—Ä–∞ (Curve25519, ChaCha20-Poly1305, BLAKE2s).</li>
    <li>–¢—É–Ω–Ω–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º <span class="mono">wg0</span> (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å), –∞ –¥–æ—Å—Ç—É–ø –¥–∞—é—Ç –ø–∞—Ä—ã –∫–ª—é—á–µ–π <b>Server ‚Üî Client</b>.</li>
    <li>–ö–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π IP –≤ –ø–æ–¥—Å–µ—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä <span class="mono">10.7.0.0/24</span>) –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –±–ª–æ–∫–µ <span class="mono">[Peer]</span>.</li>
    <li>–ü–∞—Ä–∞–º–µ—Ç—Ä <span class="mono">AllowedIPs</span> –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –∞–¥—Ä–µ—Å–∞ —à–ª—ë–º —á–µ—Ä–µ–∑ —Ç—É–Ω–Ω–µ–ª—å (—á–∞—Å—Ç–æ <span class="mono">0.0.0.0/0, ::/0</span> ‚Äî –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫).</li>
  </ul>
</div>

<!-- ===================== 1. –£–°–¢–ê–ù–û–í–ö–ê ===================== -->
<h2 data-i18n="step1_title">üöÄ –®–∞–≥ 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ WireGuard</h2>
<div class="tip"><span class="tag" data-i18n="tag_why">üîé –ó–∞—á–µ–º</span> <span data-i18n="step1_blurb">–°—Ç–∞–≤–∏–º WireGuard –∏ —É—Ç–∏–ª–∏—Ç—É –¥–ª—è QR ‚Äî —É–¥–æ–±–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω.</span></div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>apt update -y && apt install -y wireguard qrencode</code></pre>

<!-- ===================== 2. –ö–õ–Æ–ß–ò –ò –ë–ê–ó–û–í–´–ô –°–ï–†–í–ï–† ===================== -->
<h2 data-i18n="step2_title">üß© –®–∞–≥ 2. –ö–ª—é—á–∏ –∏ –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥ —Å–µ—Ä–≤–µ—Ä–∞</h2>
<div class="info">
  <span class="tag" data-i18n="tag_theory">üí° –¢–µ–æ—Ä–∏—è</span>
  <p data-i18n="step2_blurb">–ì–µ–Ω–µ—Ä–∏–º –∫–ª—é—á–∏: –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø—É–±–ª–∏—á–Ω—ã–π —Ä–∞–∑–¥–∞—ë–º –∫–ª–∏–µ–Ω—Ç–∞–º.</p>
</div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>cd /etc/wireguard
umask 077
wg genkey | tee server_private.key | wg pubkey > server_public.key
</code></pre>

<div class="tip">
  <span class="tag" data-i18n="tag_what">üõ† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥</span>
  <span data-i18n="step2_cfg_blurb">–ë–ª–æ–∫ [Interface]: –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞, IP –ø–æ–¥—Å–µ—Ç–∏, –ø–æ—Ä—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è.</span>
</div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>cat > /etc/wireguard/wg0.conf <<'EOF'
[Interface]
PrivateKey = $(cat /etc/wireguard/server_private.key)
Address = 10.7.0.1/24
ListenPort = 51820
SaveConfig = false
EOF
</code></pre>

<!-- ===================== 3. –ú–ê–†–®–†–£–¢–ò–ó–ê–¶–ò–Ø ===================== -->
<h2 data-i18n="step3_title">üåê –®–∞–≥ 3. –í–∫–ª—é—á–∞–µ–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é</h2>
<div class="info">
  <span class="tag" data-i18n="tag_theory">üí° –¢–µ–æ—Ä–∏—è</span>
  <p data-i18n="step3_blurb">ip_forward —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –ø–∞–∫–µ—Ç—ã –º–µ–∂–¥—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏.</p>
</div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>echo "net.ipv4.ip_forward=1" >> /etc/sysctl.conf
sysctl -p
</code></pre>

<!-- ===================== 4. –°–¢–ê–†–¢ –°–ï–†–í–ï–†–ê ===================== -->
<h2 data-i18n="step4_title">üü¢ –®–∞–≥ 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞</h2>
<div class="tip"><span class="tag" data-i18n="tag_why">üõ† –ó–∞—á–µ–º</span> <span data-i18n="step4_blurb">–ü–æ–¥–Ω–∏–º–∞–µ–º wg0 –∏ –≤–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫.</span></div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>systemctl enable wg-quick@wg0
systemctl start wg-quick@wg0
sudo wg show
</code></pre>

<!-- ===================== 5. –°–ö–†–ò–ü–¢ –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ö–õ–ò–ï–ù–¢–û–í ===================== -->
<h2 data-i18n="step5_title">ü§ñ –®–∞–≥ 5. –ê–≤—Ç–æ–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ + QR</h2>
<div class="info">
  <span class="tag" data-i18n="tag_how">üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç</span>
  <p data-i18n="step5_blurb">–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—ë—Ç –∫–ª—é—á–∏, –≤—ã–¥–∞—ë—Ç IP, –ø—Ä–∞–≤–∏—Ç wg0.conf, –≥–µ–Ω–µ—Ä–∏—Ç –∫–æ–Ω—Ñ–∏–≥ –∏ QR.</p>
</div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>cat > /usr/local/bin/add-wg-client.sh <<'EOF'
#!/bin/bash
WG_CONF="/etc/wireguard/wg0.conf"
WG_DIR="/etc/wireguard"
SERVER_PUB_KEY=$(cat $WG_DIR/server_public.key)
SERVER_IP=$(hostname -I | awk '{print $1}')
PORT=51820
read -p "–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: phone): " CLIENT_NAME
CLIENT_PRIV="$WG_DIR/${CLIENT_NAME}_private.key"
CLIENT_PUB="$WG_DIR/${CLIENT_NAME}_public.key"
CLIENT_CONF="$WG_DIR/${CLIENT_NAME}.conf"
wg genkey | tee $CLIENT_PRIV | wg pubkey > $CLIENT_PUB
LAST_IP=$(grep -m1 -oE '10\.7\.0\.[0-9]+' $WG_CONF | awk -F. '{print $4}' | sort -n | tail -1)
if [ -z "$LAST_IP" ]; then CLIENT_IP="10.7.0.2"; else CLIENT_IP="10.7.0.$((LAST_IP + 1))"; fi
echo -e "\n[Peer]\n# $CLIENT_NAME\nPublicKey = $(cat $CLIENT_PUB)\nAllowedIPs = ${CLIENT_IP}/32" | tee -a $WG_CONF > /dev/null
cat > $CLIENT_CONF <<CFG
[Interface]
PrivateKey = $(cat $CLIENT_PRIV)
Address = ${CLIENT_IP}/32
DNS = 1.1.1.1

[Peer]
PublicKey = $SERVER_PUB_KEY
Endpoint = $SERVER_IP:$PORT
AllowedIPs = 0.0.0.0/0, ::/0
PersistentKeepalive = 25
CFG
chmod 600 $CLIENT_CONF $CLIENT_PRIV
systemctl restart wg-quick@wg0
echo "‚úÖ –ö–ª–∏–µ–Ω—Ç '$CLIENT_NAME' –¥–æ–±–∞–≤–ª–µ–Ω!"
echo "üìÑ –ö–æ–Ω—Ñ–∏–≥: $CLIENT_CONF"
qrencode -t ansiutf8 < $CLIENT_CONF
EOF
chmod +x /usr/local/bin/add-wg-client.sh
</code></pre>

<!-- ===================== 6. –°–ö–†–ò–ü–¢ –£–î–ê–õ–ï–ù–ò–Ø –ö–õ–ò–ï–ù–¢–û–í ===================== -->
<h2 data-i18n="step6_title">‚ùå –®–∞–≥ 6. –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞</h2>
<div class="info">
  <span class="tag" data-i18n="tag_how">üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç</span>
  <p data-i18n="step6_blurb">–ò—â–µ–º –ø–æ –ø—É–±–ª–∏—á–Ω–æ–º—É –∫–ª—é—á—É –±–ª–æ–∫ [Peer], –≤—ã—Ä–µ–∑–∞–µ–º –µ–≥–æ –∏ —á–∏—Å—Ç–∏–º —Ñ–∞–π–ª—ã –∫–ª–∏–µ–Ω—Ç–∞.</p>
</div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>cat > /usr/local/bin/remove-wg-client.sh <<'EOF'
#!/bin/bash
WG_CONF="/etc/wireguard/wg0.conf"
WG_DIR="/etc/wireguard"
read -p "–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: " CLIENT_NAME
CLIENT_PRIV="$WG_DIR/${CLIENT_NAME}_private.key"
CLIENT_PUB="$WG_DIR/${CLIENT_NAME}_public.key"
CLIENT_CONF="$WG_DIR/${CLIENT_NAME}.conf"
if [ ! -f "$CLIENT_PUB" ]; then echo "‚ö†Ô∏è –ö–ª–∏–µ–Ω—Ç '$CLIENT_NAME' –Ω–µ –Ω–∞–π–¥–µ–Ω!"; exit 1; fi
PUB_KEY=$(cat "$CLIENT_PUB")
# –£–¥–∞–ª—è–µ–º –±–ª–æ–∫ [Peer] c —ç—Ç–∏–º –∫–ª—é—á–æ–º (–¥–æ –ø–µ—Ä–≤–æ–π –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏)
awk -v key="$PUB_KEY" 'BEGIN{skip=0} /^\[Peer\]/{block=1} block&&$0 ~ "PublicKey = "key{skip=1}
skip&&NF==0{skip=0; block=0; next}
skip{next} {print}' "$WG_CONF" > "${WG_CONF}.tmp" && mv "${WG_CONF}.tmp" "$WG_CONF"
rm -f "$CLIENT_PRIV" "$CLIENT_PUB" "$CLIENT_CONF"
systemctl restart wg-quick@wg0
echo "‚úÖ –ö–ª–∏–µ–Ω—Ç '$CLIENT_NAME' –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω!"
EOF
chmod +x /usr/local/bin/remove-wg-client.sh
</code></pre>

<!-- ===================== 7. –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï ===================== -->
<h2 data-i18n="usage_title">üß≠ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h2>
<table>
  <tr>
    <th data-i18n="tbl_action">–î–µ–π—Å—Ç–≤–∏–µ</th>
    <th data-i18n="tbl_command">–ö–æ–º–∞–Ω–¥–∞</th>
    <th data-i18n="tbl_comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
  </tr>
  <tr>
    <td data-i18n="usage_add">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</td>
    <td><code>sudo add-wg-client.sh</code></td>
    <td data-i18n="usage_add_note">–°–æ–∑–¥–∞—ë—Ç –∫–ª—é—á–∏, IP, –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç QR.</td>
  </tr>
  <tr>
    <td data-i18n="usage_del">–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</td>
    <td><code>sudo remove-wg-client.sh</code></td>
    <td data-i18n="usage_del_note">–£–¥–∞–ª—è–µ—Ç [Peer] + –∫–ª—é—á–∏ + –∫–æ–Ω—Ñ–∏–≥ –∫–ª–∏–µ–Ω—Ç–∞.</td>
  </tr>
  <tr>
    <td data-i18n="usage_show">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</td>
    <td><code>sudo wg show</code></td>
    <td data-i18n="usage_show_note">–°–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤, —Ç—Ä–∞—Ñ–∏–∫, —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è.</td>
  </tr>
</table>

<!-- ===================== 8. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ù–Æ–ê–ù–°–´ ===================== -->
<h2 data-i18n="security_title">üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω—é–∞–Ω—Å—ã</h2>
<div class="tip">
  <span class="tag" data-i18n="tag_reco">‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</span>
  <ul>
    <li>–ü—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã: <span class="mono">chmod 600 /etc/wireguard/*.key /etc/wireguard/*.conf</span></li>
    <li>–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è: <span class="mono">cp /etc/wireguard/wg0.conf /etc/wireguard/wg0.conf.bak</span></li>
    <li data-i18n="security_privkey">–ù–∏–∫–æ–º—É –Ω–µ –æ—Ç–¥–∞–≤–∞–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏.</li>
  </ul>
</div>
<div class="warn">
  <span class="tag" data-i18n="tag_notes">‚ö†Ô∏è –ï—Å–ª–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–µ —Ö–æ–¥–∏—Ç</span>
  <ul>
    <li data-i18n="security_forward">–ü—Ä–æ–≤–µ—Ä—å ip_forward (—à–∞–≥ 3).</li>
    <li data-i18n="security_port">–û—Ç–∫—Ä–æ–π –ø–æ—Ä—Ç 51820/UDP –Ω–∞ —Ñ–∞–µ—Ä–≤–æ–ª–µ.</li>
    <li data-i18n="security_nat">–î–ª—è –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –≤–∫–ª—é—á–∏ NAT (–Ω–∏–∂–µ).</li>
  </ul>
</div>

<!-- ===================== 9. NAT –∏ –¥–æ—Å—Ç—É–ø –∫–ª–∏–µ–Ω—Ç–æ–≤ ===================== -->
<h2 data-i18n="nat_title">üåâ NAT –∏ –¥–æ—Å—Ç—É–ø –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç</h2>

<div class="info">
  <span class="tag" data-i18n="tag_theory">üí° –¢–µ–æ—Ä–∏—è</span>
  <p data-i18n="nat_blurb">NAT –º–∞—Å–∫–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å–∞ –∏–∑ wg0 –ø–æ–¥ –≤–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, eth0), —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç—ã –≤—ã—Ö–æ–¥–∏–ª–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.</p>
</div>

<div class="tip">
  <span class="tag" data-i18n="nat_ipt_tag">üõ† Iptables ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–±</span>
</div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>EXT_IF=eth0
iptables -t nat -A POSTROUTING -o $EXT_IF -j MASQUERADE
iptables -A FORWARD -i wg0 -o $EXT_IF -j ACCEPT
iptables -A FORWARD -i $EXT_IF -o wg0 -m state --state RELATED,ESTABLISHED -j ACCEPT
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞
apt install -y iptables-persistent
netfilter-persistent save
</code></pre>

<div class="tip">
  <span class="tag" data-i18n="nat_nft_tag">üß± Nftables ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±</span>
</div>
<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>EXT_IF=eth0
nft add table ip wg
nft 'add chain ip wg postrouting { type nat hook postrouting priority 100; }'
nft add rule ip wg postrouting oifname $EXT_IF masquerade
nft 'add chain ip wg forward { type filter hook forward priority 0; }'
nft add rule ip wg forward iifname "wg0" oifname $EXT_IF accept
nft add rule ip wg forward iifname $EXT_IF oifname "wg0" ct state related,established accept
</code></pre>

<div class="warn">
  <span class="tag" data-i18n="tag_notes">‚ö†Ô∏è –ó–∞–º–µ—á–∞–Ω–∏—è</span>
  <ul>
    <li data-i18n="nat_iface">–ü–æ–º–µ–Ω—è–π eth0 –Ω–∞ —Å–≤–æ–π –≤–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø–æ–¥—Å–∫–∞–∑–∫–∞: <span class="mono">ip a</span>).</li>
    <li data-i18n="nat_forward">–£–±–µ–¥–∏—Å—å, —á—Ç–æ <span class="mono">net.ipv4.ip_forward=1</span> –≤–∫–ª—é—á—ë–Ω.</li>
    <li data-i18n="nat_firewalld">–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å firewalld ‚Äî –≤–∫–ª—é—á–∞–π –º–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥ —Ç–∞–º.</li>
  </ul>
</div>

<!-- ===================== 10. –ü–†–û–í–ï–†–ö–ê ===================== -->
<h2 data-i18n="check_title">üîç –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è WireGuard</h2>

<div class="info">
  <span class="tag" data-i18n="tag_what">üí° –ß—Ç–æ –¥–µ–ª–∞–µ—Ç</span>
  <p data-i18n="check_blurb">–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞, –ø–æ—Ä—Ç, ip_forward –∏ —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤.</p>
</div>

<pre><button class="copy" data-i18n="btn_copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button><code>cat > /usr/local/bin/check-wg.sh <<'EOF'
#!/bin/bash
echo "===== üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ WireGuard ====="
WG_IF="wg0"
PORT=51820
EXT_IF=$(ip route get 8.8.8.8 2>/dev/null | awk '{print $5; exit}')
echo "–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ—Ä–≤–µ—Ä–∞: $WG_IF"
echo "–í–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: $EXT_IF"
echo

echo "‚û°Ô∏è  –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã:"
systemctl is-active wg-quick@$WG_IF && echo "‚úÖ –°–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–µ–Ω" || echo "‚ùå –ù–µ –∑–∞–ø—É—â–µ–Ω"

echo
echo "‚û°Ô∏è  –ü—Ä–æ–≤–µ—Ä—è–µ–º IP Forward:"
grep -q 1 /proc/sys/net/ipv4/ip_forward && echo "‚úÖ –í–∫–ª—é—á—ë–Ω" || echo "‚ö†Ô∏è –û—Ç–∫–ª—é—á—ë–Ω"

echo
echo "‚û°Ô∏è  –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã:"
ss -ulpn | grep $PORT >/dev/null && echo "‚úÖ –ü–æ—Ä—Ç $PORT/UDP –æ—Ç–∫—Ä—ã—Ç" || echo "‚ö†Ô∏è –ü–æ—Ä—Ç $PORT/UDP –Ω–µ –Ω–∞–π–¥–µ–Ω"

echo
echo "‚û°Ô∏è  –ü–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã:"
wg show $WG_IF 2>/dev/null | grep -E 'peer|endpoint|handshake|transfer' || echo "‚Äî –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ—Ç ‚Äî"
echo
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚úÖ"
EOF
chmod +x /usr/local/bin/check-wg.sh
</code></pre>

<h3 data-i18n="use_title">üìò –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h3>
<table>
<tr><th data-i18n="tbl_command">–ö–æ–º–∞–Ω–¥–∞</th><th data-i18n="tbl_purpose">–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</th></tr>
<tr><td><code>sudo check-wg.sh</code></td><td data-i18n="use_check">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π.</td></tr>
<tr><td><code>sudo systemctl restart wg-quick@wg0</code></td><td data-i18n="use_restart">–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ wg0 –ø–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫.</td></tr>
<tr><td><code>sudo wg show</code></td><td data-i18n="use_show">–°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Ç—Ä–∞—Ñ–∏–∫–∞.</td></tr>
</table>

</div> <!-- container end -->

<div class="footer" data-i18n="footer">
–ê–≤—Ç–æ—Ä ‚Äî <b>Mahmadsharif</b> üí™ | –°–æ–∑–¥–∞–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ <b>ChatGPT-5</b> ‚öôÔ∏è
</div>

<script>
// –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
document.querySelectorAll("button.copy").forEach(btn=>{
  btn.addEventListener("click",()=>{
    const code = btn.nextElementSibling.innerText;
    navigator.clipboard.writeText(code);
    btn.innerText = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!";
    setTimeout(()=>btn.innerText="üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",1500);
  });
});

// –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
const toggle=document.getElementById("themeToggle");
function setThemeLabel(){
  toggle.textContent=document.body.classList.contains("light")?"üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞":"‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞";
}
toggle.addEventListener("click",()=>{document.body.classList.toggle("light"); setThemeLabel();});
setThemeLabel();

// ======= –Ø–∑—ã–∫ –∏ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ =======
const langSelect = document.getElementById("languageSelect");
const fontSelect = document.getElementById("fontSizeSelect");

// —Å–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–∫–æ—Ä–æ—Ç–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ)
const i18n = {
  ru: {
    doc_title:"WireGuard VPN ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (–¢–µ–æ—Ä–∏—è + –ü—Ä–∞–∫—Ç–∏–∫–∞)",
    hero_title:"WireGuard VPN ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ",
    hero_byline:"–ê–≤—Ç–æ—Ä: <b>Mahmadsharif</b> üí™ —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å <b>ChatGPT-5</b> ‚öôÔ∏è",

    intro_title:"–ß—Ç–æ —Ç–∞–∫–æ–µ WireGuard ‚Äî –∫–æ—Ä–æ—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É",
    intro_blurb:"WireGuard ‚Äî –±—ã—Å—Ç—Ä—ã–π VPN —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º. –°—É—Ç—å: —Å–µ—Ä–≤–µ—Ä ‚Üî –∫–ª–∏–µ–Ω—Ç—ã –ø–æ –∫–ª—é—á–∞–º, —Ç—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å wg0.",

    step1_title:"üöÄ –®–∞–≥ 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ WireGuard",
    step1_blurb:"–°—Ç–∞–≤–∏–º WireGuard –∏ —É—Ç–∏–ª–∏—Ç—É –¥–ª—è QR ‚Äî —É–¥–æ–±–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω.",

    step2_title:"üß© –®–∞–≥ 2. –ö–ª—é—á–∏ –∏ –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥ —Å–µ—Ä–≤–µ—Ä–∞",
    step2_blurb:"–ì–µ–Ω–µ—Ä–∏–º –∫–ª—é—á–∏: –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø—É–±–ª–∏—á–Ω—ã–π —Ä–∞–∑–¥–∞—ë–º –∫–ª–∏–µ–Ω—Ç–∞–º.",
    step2_cfg_blurb:"–ë–ª–æ–∫ [Interface]: –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞, IP –ø–æ–¥—Å–µ—Ç–∏, –ø–æ—Ä—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è.",

    step3_title:"üåê –®–∞–≥ 3. –í–∫–ª—é—á–∞–µ–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é",
    step3_blurb:"ip_forward —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –ø–∞–∫–µ—Ç—ã –º–µ–∂–¥—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏.",

    step4_title:"üü¢ –®–∞–≥ 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞",
    step4_blurb:"–ü–æ–¥–Ω–∏–º–∞–µ–º wg0 –∏ –≤–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫.",

    step5_title:"ü§ñ –®–∞–≥ 5. –ê–≤—Ç–æ–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ + QR",
    step5_blurb:"–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—ë—Ç –∫–ª—é—á–∏, –≤—ã–¥–∞—ë—Ç IP, –ø—Ä–∞–≤–∏—Ç wg0.conf, –≥–µ–Ω–µ—Ä–∏—Ç –∫–æ–Ω—Ñ–∏–≥ –∏ QR.",

    step6_title:"‚ùå –®–∞–≥ 6. –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞",
    step6_blurb:"–ò—â–µ–º –ø–æ –ø—É–±–ª–∏—á–Ω–æ–º—É –∫–ª—é—á—É –±–ª–æ–∫ [Peer], –≤—ã—Ä–µ–∑–∞–µ–º –µ–≥–æ –∏ —á–∏—Å—Ç–∏–º —Ñ–∞–π–ª—ã –∫–ª–∏–µ–Ω—Ç–∞.",

    usage_title:"üß≠ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ",
    tbl_action:"–î–µ–π—Å—Ç–≤–∏–µ", tbl_command:"–ö–æ–º–∞–Ω–¥–∞", tbl_comment:"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
    usage_add:"–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞", usage_add_note:"–°–æ–∑–¥–∞—ë—Ç –∫–ª—é—á–∏, IP, –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç QR.",
    usage_del:"–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞", usage_del_note:"–£–¥–∞–ª—è–µ—Ç [Peer] + –∫–ª—é—á–∏ + –∫–æ–Ω—Ñ–∏–≥ –∫–ª–∏–µ–Ω—Ç–∞.",
    usage_show:"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ", usage_show_note:"–°–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤, —Ç—Ä–∞—Ñ–∏–∫, —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è.",

    security_title:"üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω—é–∞–Ω—Å—ã",
    security_privkey:"–ù–∏–∫–æ–º—É –Ω–µ –æ—Ç–¥–∞–≤–∞–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏.",
    security_forward:"–ü—Ä–æ–≤–µ—Ä—å ip_forward (—à–∞–≥ 3).",
    security_port:"–û—Ç–∫—Ä–æ–π –ø–æ—Ä—Ç 51820/UDP –Ω–∞ —Ñ–∞–µ—Ä–≤–æ–ª–µ.",
    security_nat:"–î–ª—è –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –≤–∫–ª—é—á–∏ NAT (–Ω–∏–∂–µ).",

    nat_title:"üåâ NAT –∏ –¥–æ—Å—Ç—É–ø –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç",
    nat_blurb:"NAT –º–∞—Å–∫–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å–∞ –∏–∑ wg0 –ø–æ–¥ –≤–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, eth0), —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç—ã –≤—ã—Ö–æ–¥–∏–ª–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.",
    nat_ipt_tag:"üõ† Iptables ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–±",
    nat_nft_tag:"üß± Nftables ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±",
    nat_iface:"–ü–æ–º–µ–Ω—è–π eth0 –Ω–∞ —Å–≤–æ–π –≤–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø–æ–¥—Å–∫–∞–∑–∫–∞: ip a).",
    nat_forward:"–£–±–µ–¥–∏—Å—å, —á—Ç–æ net.ipv4.ip_forward=1 –≤–∫–ª—é—á—ë–Ω.",
    nat_firewalld:"–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å firewalld ‚Äî –≤–∫–ª—é—á–∞–π –º–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥ —Ç–∞–º.",

    check_title:"üîç –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è WireGuard",
    check_blurb:"–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞, –ø–æ—Ä—Ç, ip_forward –∏ —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤.",
    use_title:"üìò –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ",
    tbl_purpose:"–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ",
    use_check:"–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π.",
    use_restart:"–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ wg0 –ø–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫.",
    use_show:"–°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Ç—Ä–∞—Ñ–∏–∫–∞.",

    tag_theory:"üí° –¢–µ–æ—Ä–∏—è", tag_why:"üîé –ó–∞—á–µ–º", tag_how:"üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç", tag_what:"üõ† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥", tag_reco:"‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏", tag_notes:"‚ö†Ô∏è –ó–∞–º–µ—á–∞–Ω–∏—è",

    btn_copy:"üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
    font_small:"–ú–∞–ª–µ–Ω—å–∫–∏–π", font_normal:"–û–±—ã—á–Ω—ã–π", font_large:"–ö—Ä—É–ø–Ω—ã–π",
    footer:"–ê–≤—Ç–æ—Ä ‚Äî <b>Mahmadsharif</b> üí™ | –°–æ–∑–¥–∞–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ <b>ChatGPT-5</b> ‚öôÔ∏è",
  },
  en: {
    doc_title:"WireGuard VPN ‚Äî Full Guide (Theory + Practice)",
    hero_title:"WireGuard VPN ‚Äî Full Guide",
    hero_byline:"Author: <b>Mahmadsharif</b> üí™ with <b>ChatGPT-5</b> ‚öôÔ∏è",

    intro_title:"What is WireGuard ‚Äî in short",
    intro_blurb:"WireGuard is a fast VPN with modern crypto. Idea: server ‚Üî clients via keys, traffic through wg0 interface.",

    step1_title:"üöÄ Step 1. Install WireGuard",
    step1_blurb:"Install WireGuard and QR tool to add phones easily.",

    step2_title:"üß© Step 2. Server keys & base config",
    step2_blurb:"Generate keys: keep private on server, share public to clients.",
    step2_cfg_blurb:"[Interface] block: server key, subnet IP, listening port.",

    step3_title:"üåê Step 3. Enable routing",
    step3_blurb:"ip_forward lets the server forward packets between interfaces.",

    step4_title:"üü¢ Step 4. Start the server",
    step4_blurb:"Bring up wg0 and enable autostart.",

    step5_title:"ü§ñ Step 5. Auto-add clients + QR",
    step5_blurb:"Script makes keys, assigns IP, edits wg0.conf, creates config & QR.",

    step6_title:"‚ùå Step 6. Remove a client",
    step6_blurb:"Find client's [Peer] by public key, delete it and clean files.",

    usage_title:"üß≠ Usage",
    tbl_action:"Action", tbl_command:"Command", tbl_comment:"Comment",
    usage_add:"Add a client", usage_add_note:"Creates keys, IP, adds to server and shows QR.",
    usage_del:"Remove a client", usage_del_note:"Deletes [Peer] + keys + client config.",
    usage_show:"Show status", usage_show_note:"Peers list, traffic, handshakes.",

    security_title:"üîê Security & gotchas",
    security_privkey:"Never share private keys.",
    security_forward:"Check ip_forward (step 3).",
    security_port:"Open 51820/UDP on firewall.",
    security_nat:"Enable NAT for internet access (below).",

    nat_title:"üåâ NAT & client internet access",
    nat_blurb:"NAT hides wg0 addresses behind external iface (e.g., eth0) for internet access.",
    nat_ipt_tag:"üõ† Iptables ‚Äî classic way",
    nat_nft_tag:"üß± Nftables ‚Äî modern way",
    nat_iface:"Replace eth0 with your external iface (tip: ip a).",
    nat_forward:"Ensure net.ipv4.ip_forward=1 is enabled.",
    nat_firewalld:"If using firewalld, enable masquerade there.",

    check_title:"üîç WireGuard status check script",
    check_blurb:"Shows service status, port, ip_forward and clients.",
    use_title:"üìò Usage",
    tbl_purpose:"Purpose",
    use_check:"Check server & peers status.",
    use_restart:"Restart wg0 after changes.",
    use_show:"List clients and traffic.",

    tag_theory:"üí° Theory", tag_why:"üîé Why", tag_how:"üí° How it works", tag_what:"üõ† What the config does", tag_reco:"‚úÖ Tips", tag_notes:"‚ö†Ô∏è Notes",

    btn_copy:"üìã Copy",
    font_small:"Small", font_normal:"Normal", font_large:"Large",
    footer:"Author ‚Äî <b>Mahmadsharif</b> üí™ | Made with <b>ChatGPT-5</b> ‚öôÔ∏è",
  },
  tj: {
    doc_title:"WireGuard VPN ‚Äî –î–∞—Å—Ç—É—Ä–∏ –ø—É—Ä—Ä–∞ (–ù–∞–∑–∞—Ä–∏—è + –ê–º–∞–ª)",
    hero_title:"WireGuard VPN ‚Äî –î–∞—Å—Ç—É—Ä–∏ –∫”Ø—Ç–æ“≥ –≤–∞ —Ñ–∞“≥–º–æ",
    hero_byline:"–ú—É–∞–ª–ª–∏—Ñ: <b>Mahmadsharif</b> üí™ –±–æ —ë—Ä–∏–∏ <b>ChatGPT-5</b> ‚öôÔ∏è",

    intro_title:"WireGuard —á–∏—Å—Ç ‚Äî –∫”Ø—Ç–æ“≥",
    intro_blurb:"WireGuard ‚Äî VPN-–∏ —Ç–µ–∑ –±–æ —Ä–∞–º–∑–≥—É–∑–æ—Ä–∏–∏ –Ω–∞–≤. –°–µ—Ä–≤–µ—Ä ‚Üî –º—É—à—Ç–∞—Ä–∏—ë–Ω –±–æ –∫–∞–ª–∏–¥“≥–æ, —Ç—Ä–∞—Ñ–∏–∫ –∞–∑ wg0 –º–µ–≥—É–∑–∞—Ä–∞–¥.",

    step1_title:"üöÄ “ö–∞–¥–∞–º–∏ 1. –ù–∞—Å–±–∏ WireGuard",
    step1_blurb:"WireGuard –≤–∞ –∞—Å–±–æ–±–∏ QR-—Ä–æ –º–µ–≥—É–∑–æ—Ä–µ–º ‚Äî –ø–∞–π–≤–∞—Å—Ç –∫–∞—Ä–¥–∞–Ω–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Å–æ–Ω –º–µ—à–∞–≤–∞–¥.",

    step2_title:"üß© “ö–∞–¥–∞–º–∏ 2. –ö–∞–ª–∏–¥“≥–æ –≤–∞ –∫–æ–Ω—Ñ–∏–≥–∏ –∞—Å–æ—Å”£",
    step2_blurb:"–ö–∞–ª–∏–¥“≥–æ –º–µ—Å–æ–∑–µ–º: –º–∞—Ö—Ñ”£ –¥–∞—Ä —Å–µ—Ä–≤–µ—Ä –º–µ–º–æ–Ω–∞–¥, —É–º—É–º–∏—Ä–æ –±–∞ –º—É—à—Ç–∞—Ä–∏—ë–Ω –º–µ–¥–∏“≥–µ–º.",
    step2_cfg_blurb:"[Interface]: –∫–∞–ª–∏–¥–∏ —Å–µ—Ä–≤–µ—Ä, IP –∑–µ—Ä—à–∞—ä–±–∞, –ø–æ—Ä—Ç–∏ –≥”Ø—à–∫—É–Ω”£.",

    step3_title:"üåê “ö–∞–¥–∞–º–∏ 3. –§–æ—Ä–≤–∞—Ä–¥–∏ IP",
    step3_blurb:"ip_forward –±–∞ —Å–µ—Ä–≤–µ—Ä –∏“∑–æ–∑–∞—Ç –º–µ–¥–∏“≥–∞–¥ –±–∞—Å—Ç–∞“≥–æ –±–∞–π–Ω–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å“≥–æ –≥—É–∑–∞—Ä–∞–Ω–¥.",

    step4_title:"üü¢ “ö–∞–¥–∞–º–∏ 4. –ë–∞ –∫–æ—Ä –∞–Ω–¥–æ—Ö—Ç–∞–Ω",
    step4_blurb:"wg0-—Ä–æ –±–æ–ª–æ –º–µ–±–∞—Ä–µ–º –≤–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—Ä–æ —Ñ–∞—ä–æ–ª –º–µ–∫—É–Ω–µ–º.",

    step5_title:"ü§ñ “ö–∞–¥–∞–º–∏ 5. –ò–ª–æ–≤–∞–∏ —Ö—É–¥–∫–æ—Ä–∏ –º—É—à—Ç–∞—Ä”£ + QR",
    step5_blurb:"–°–∫—Ä–∏–ø—Ç –∫–∞–ª–∏–¥ –º–µ—Å–æ–∑–∞–¥, IP –º–µ–¥–∏“≥–∞–¥, wg0.conf-—Ä–æ –º–µ–Ω–∞–≤–∏—Å–∞–¥, –∫–æ–Ω—Ñ–∏–≥—É QR —Ç–∞–≤–ª–∏–¥ –º–µ–∫—É–Ω–∞–¥.",

    step6_title:"‚ùå “ö–∞–¥–∞–º–∏ 6. –¢–æ–∑–∞–∫—É–Ω–∏–∏ –º—É—à—Ç–∞—Ä”£",
    step6_blurb:"[Peer]-–∏ –º—É—à—Ç–∞—Ä”£ –±–æ –∫–∞–ª–∏–¥–∏ —É–º—É–º”£ —ë—Ñ—Ç–∞ —à—É–¥–∞, “≥–∞–∑—Ñ –º–µ–≥–∞—Ä–¥–∞–¥, —Ñ–∞–π–ª“≥–æ —Ç–æ–∑–∞ –º–µ—à–∞–≤–∞–Ω–¥.",

    usage_title:"üß≠ –ò—Å—Ç–∏—Ñ–æ–¥–∞",
    tbl_action:"–ê–º–∞–ª", tbl_command:"–§–∞—Ä–º–æ–Ω", tbl_comment:"–®–∞—Ä“≥",
    usage_add:"–ò–ª–æ–≤–∞–∏ –º—É—à—Ç–∞—Ä”£", usage_add_note:"–ö–∞–ª–∏–¥, IP –º–µ—Å–æ–∑–∞–¥, –±–∞ —Å–µ—Ä–≤–µ—Ä –∑–∞–º –º–µ–∫—É–Ω–∞–¥ –≤–∞ QR –Ω–∏—à–æ–Ω –º–µ–¥–∏“≥–∞–¥.",
    usage_del:"“≤–∞–∑—Ñ–∏ –º—É—à—Ç–∞—Ä”£", usage_del_note:"[Peer] + –∫–∞–ª–∏–¥“≥–æ + –∫–æ–Ω—Ñ–∏–≥–∏ –º—É—à—Ç–∞—Ä–∏—Ä–æ –ø–æ–∫ –º–µ–∫—É–Ω–∞–¥.",
    usage_show:"–°–∞—Ç“≥–∏ “≥–æ–ª–∞—Ç", usage_show_note:"–†”Ø–π—Ö–∞—Ç–∏ –ø–∏—Ä“≥–æ, —Ç—Ä–∞—Ñ–∏–∫, –¥–∞—Å—Ç—Ñ–∏—à–æ—Ä–∏“≥–æ.",

    security_title:"üîê –ë–µ—Ö–∞—Ç–∞—Ä”£ –≤–∞ –Ω–æ–∑—É–∫–∏“≥–æ",
    security_privkey:"–ö–∞–ª–∏–¥–∏ –º–∞—Ö—Ñ–∏—Ä–æ –±–∞ –∫–∞—Å–µ –Ω–∞–¥–∏“≥.",
    security_forward:"ip_forward-—Ä–æ —Å–∞–Ω“∑ (“õ–∞–¥–∞–º–∏ 3).",
    security_port:"–ü–æ—Ä—Ç–∏ 51820/UDP-—Ä–æ –¥–∞—Ä —Ñ–∞–µ—Ä–≤–æ–ª –±–æ–∑ –∫—É–Ω.",
    security_nat:"–ë–∞—Ä–æ–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç NAT-—Ä–æ —Ñ–∞—ä–æ–ª —Å–æ–∑ (–ø–æ—ë–Ω).",

    nat_title:"üåâ NAT –≤–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∏ –º—É—à—Ç–∞—Ä–∏—ë–Ω",
    nat_blurb:"NAT —Å—É—Ä–æ“ì–∞“≥–æ–∏ wg0-—Ä–æ –∑–µ—Ä–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –±–µ—Ä—É–Ω–∞ (–º–∞—Å–∞–ª–∞–Ω, eth0) –ø–∏–Ω“≥–æ–Ω –º–µ–∫—É–Ω–∞–¥.",
    nat_ipt_tag:"üõ† Iptables ‚Äî —Ä–æ“≥–∏ –∫–ª–∞—Å—Å–∏–∫”£",
    nat_nft_tag:"üß± Nftables ‚Äî —Ä–æ“≥–∏ –º—É–æ—Å–∏—Ä",
    nat_iface:"eth0-—Ä–æ –±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –±–µ—Ä—É–Ω–∏–∏ —Ö—É–¥ –∏–≤–∞–∑ –∫—É–Ω (–∏—à–æ—Ä–∞: ip a).",
    nat_forward:"–ë–æ–≤–∞—Ä”£ “≥–æ—Å–∏–ª –∫—É–Ω net.ipv4.ip_forward=1 —Ñ–∞—ä–æ–ª –∞—Å—Ç.",
    nat_firewalld:"–ê–≥–∞—Ä firewalld –¥–æ—Ä”£ ‚Äî –º–∞—Å–∫–∞—Ä–∞–¥—Ä–æ –¥–∞—Ä –æ–Ω —Ñ–∞—ä–æ–ª –Ω–∞–º–æ.",

    check_title:"üîç –°–∫—Ä–∏–ø—Ç–∏ —Å–∞–Ω“∑–∏—à–∏ “≥–æ–ª–∞—Ç–∏ WireGuard",
    check_blurb:"“≤–æ–ª–∞—Ç–∏ —Å–µ—Ä–≤–∏—Å, –ø–æ—Ä—Ç, ip_forward –≤–∞ —Ä”Ø–π—Ö–∞—Ç–∏ –º—É—à—Ç–∞—Ä–∏—ë–Ω—Ä–æ –Ω–∏—à–æ–Ω –º–µ–¥–∏“≥–∞–¥.",
    use_title:"üìò –ò—Å—Ç–∏—Ñ–æ–¥–∞",
    tbl_purpose:"–ú–∞“õ—Å–∞–¥",
    use_check:"“≤–æ–ª–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä—É –ø–∞–π–≤–∞—Å—Ç“≥–æ—Ä–æ –º–µ—Å–∞–Ω“∑–∞–¥.",
    use_restart:"wg0-—Ä–æ –ø–∞—Å –∞–∑ —Ç–∞“ì–π–∏—Ä–æ—Ç –∞–∑ –Ω–∞–≤ –æ“ì–æ–∑ –º–µ–∫—É–Ω–∞–¥.",
    use_show:"–†”Ø–π—Ö–∞—Ç–∏ –º—É—à—Ç–∞—Ä–∏—ë–Ω –≤–∞ —Ç—Ä–∞—Ñ–∏–∫.",

    tag_theory:"üí° –ù–∞–∑–∞—Ä–∏—è", tag_why:"üîé –ë–∞—Ä–æ–∏ —á”£", tag_how:"üí° –ß”£ –≥—É–Ω–∞ –∫–æ—Ä –º–µ–∫—É–Ω–∞–¥", tag_what:"üõ† –ö–æ–Ω—Ñ–∏–≥ —á”£ –º–µ–∫—É–Ω–∞–¥", tag_reco:"‚úÖ –ú–∞—Å–ª–∏“≥–∞—Ç“≥–æ", tag_notes:"‚ö†Ô∏è –≠–∑–æ“≥“≥–æ",

    btn_copy:"üìã –ù—É—Å—Ö–∞",
    font_small:"–•—É—Ä–¥", font_normal:"–û–¥–¥”£", font_large:"–ö–∞–ª–æ–Ω",
    footer:"–ú—É–∞–ª–ª–∏—Ñ ‚Äî <b>Mahmadsharif</b> üí™ | –ë–æ —ë—Ä–∏–∏ <b>ChatGPT-5</b> ‚öôÔ∏è",
  }
};

// helpers
function applyFontSize(size) {
  document.body.style.fontSize =
    size === "small" ? "14px" :
    size === "large" ? "18px" : "16px";
}

function applyTranslations(lang) {
  const dict = i18n[lang] || i18n.ru;
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    if (dict[key]) el.innerHTML = dict[key];
  });
  // –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–π—Ç–ª –æ–∫–Ω–∞
  if (dict.doc_title) document.title = dict.doc_title;
  // –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ —à—Ä–∏—Ñ—Ç–∞ –≤ —Å–µ–ª–µ–∫—Ç–µ
  document.querySelectorAll("#fontSizeSelect option").forEach(opt=>{
    const key = opt.getAttribute("data-i18n");
    if (key && dict[key]) opt.textContent = dict[key];
  });
  // –∫–Ω–æ–ø–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
  document.querySelectorAll("button.copy").forEach(btn=>{
    btn.textContent = dict.btn_copy || "üìã Copy";
  });
}

// –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
const savedLang = localStorage.getItem("wg_lang") || "ru";
const savedFont = localStorage.getItem("wg_font") || "normal";
document.getElementById("languageSelect").value = savedLang;
document.getElementById("fontSizeSelect").value = savedFont;
applyFontSize(savedFont);
applyTranslations(savedLang);

// –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞
langSelect.addEventListener("change", e=>{
  const lang = e.target.value;
  localStorage.setItem("wg_lang", lang);
  applyTranslations(lang);
});

fontSelect.addEventListener("change", e=>{
  const size = e.target.value;
  localStorage.setItem("wg_font", size);
  applyFontSize(size);
});
</script>

</body>
</html>
